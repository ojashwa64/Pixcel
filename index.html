<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="Blue_modern_Design_circle_tech_mcvsdodern_logo_element-removebg-preview.png">
    <title>Pixcel AI</title>
    <style>
        :root {
            --primary: #4a6bff;
            --primary-light: #6a8aff;
            --primary-dark: #2a4bdd;
            --text: #f0f0f0;
            --text-dim: #b0b0b0;
            --bg: #0a0a12;
            --card-bg: rgba(20, 20, 40, 0.7);
            --user-bubble: rgba(74, 107, 255, 0.2);
            --ai-bubble: rgba(40, 40, 80, 0.5);
            --error: #ff4a6b;
            --success: #4aff6b;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .chat-app {
            width: 100%;
            max-width: 800px;
            height: 90vh;
            max-height: 800px;
            display: flex;
            flex-direction: column;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            background: linear-gradient(145deg, #0e0e1a 0%, #0a0a12 100%);
            position: relative;
        }

        .ai-header {
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(10, 10, 20, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
        }

        .ai-core {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            background: linear-gradient(145deg, 
                rgba(100, 149, 237, 0.9) 0%, 
                rgba(70, 130, 180, 0.9) 50%, 
                rgba(40, 100, 160, 0.9) 100%);
            box-shadow: 
                0 0 30px 10px rgba(100, 149, 237, 0.3),
                inset 0 0 20px rgba(150, 200, 255, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            animation: pulse 5s ease-in-out infinite;
            margin-right: 15px;
        }

        @keyframes pulse {
            0%, 100% { 
                box-shadow: 
                    0 0 30px 10px rgba(100, 149, 237, 0.3),
                    inset 0 0 20px rgba(150, 200, 255, 0.6);
                transform: scale(1);
            }
            50% { 
                box-shadow: 
                    0 0 40px 15px rgba(100, 180, 255, 0.5),
                    inset 0 0 30px rgba(150, 200, 255, 0.9);
                transform: scale(1.03);
            }
        }

        .ai-core-inner {
            width: 80%;
            height: 80%;
            background: linear-gradient(145deg, 
                rgba(31, 40, 55, 0.9) 0%, 
                rgba(50, 90, 150, 0.9) 100%);
            border-radius: 8px;
            box-shadow: 
                inset 0 0 20px rgba(24, 44, 81, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            color: rgba(200, 230, 255, 0.95);
            font-weight: bold;
            font-size: 24px;
            text-shadow: 
                0 0 10px rgba(100, 200, 255, 0.8);
        }

        .ai-title {
            font-size: 18px;
            font-weight: 600;
        }

        .ai-subtitle {
            font-size: 14px;
            color: var(--text-dim);
            margin-top: 3px;
        }

        .chat-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) transparent;
        }

        .chat-container::-webkit-scrollbar {
            width: 6px;
        }

        .chat-container::-webkit-scrollbar-thumb {
            background-color: var(--primary);
            border-radius: 3px;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 85%;
            line-height: 1.5;
            position: relative;
            animation: fadeIn 0.3s ease-out;
            font-size: 15px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: var(--user-bubble);
            border: 1px solid rgba(100, 149, 237, 0.3);
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .ai-message {
            background: var(--ai-bubble);
            border: 1px solid rgba(80, 100, 150, 0.3);
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }

        .command-suggestion {
            display: inline-block;
            padding: 4px 8px;
            margin: 4px;
            background: rgba(74, 107, 255, 0.2);
            border-radius: 12px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .command-suggestion:hover {
            background: rgba(74, 107, 255, 0.3);
        }

        .input-area {
            padding: 15px;
            background: rgba(10, 10, 20, 0.8);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
        }

        #user-input {
            flex: 1;
            padding: 15px 20px;
            padding-right: 50px;
            border-radius: 50px;
            border: none;
            background: rgba(30, 30, 60, 0.8);
            color: var(--text);
            font-size: 15px;
            box-shadow: 
                inset 0 0 10px rgba(0, 0, 0, 0.3);
            transition: all 0.2s;
        }

        #user-input:focus {
            outline: none;
            box-shadow: 
                inset 0 0 10px rgba(100, 149, 237, 0.3),
                0 0 15px rgba(100, 149, 237, 0.2);
        }

        .mic-btn {
            position: absolute;
            right: 10px;
            background: transparent;
            border: none;
            color: var(--text-dim);
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .mic-btn:hover {
            color: var(--primary);
            background: rgba(74, 107, 255, 0.1);
        }

        .mic-btn.listening {
            color: #ff4a4a;
            animation: pulse 1.5s infinite;
        }

        #send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(145deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #send-btn:hover {
            background: linear-gradient(145deg, var(--primary-light) 0%, var(--primary) 100%);
            transform: translateY(-2px);
        }

        #send-btn:active {
            transform: translateY(0);
        }

        .typing-indicator {
            display: none;
            padding: 10px 18px;
            background: var(--ai-bubble);
            border-radius: 18px;
            margin-right: auto;
            width: fit-content;
            border-bottom-left-radius: 5px;
            margin-bottom: 15px;
        }

        .typing-dots {
            display: flex;
            gap: 6px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: rgba(200, 230, 255, 0.7);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        .message-content {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .message-content code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 4px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9em;
        }

        .message-content pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .message-content pre code {
            background: transparent;
            padding: 0;
        }

        .message-content a {
            color: var(--primary-light);
            text-decoration: none;
        }

        .message-content a:hover {
            text-decoration: underline;
        }

        .message-content ul, 
        .message-content ol {
            padding-left: 20px;
            margin: 10px 0;
        }

        .message-content li {
            margin-bottom: 5px;
        }

        .message-content table {
            border-collapse: collapse;
            margin: 10px 0;
            width: 100%;
        }

        .message-content th, 
        .message-content td {
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px;
            text-align: left;
        }

        .message-content th {
            background-color: rgba(74, 107, 255, 0.2);
        }

        .message-content blockquote {
            border-left: 3px solid var(--primary);
            padding-left: 10px;
            margin: 10px 0;
            color: var(--text-dim);
        }

        .message-timestamp {
            font-size: 11px;
            color: var(--text-dim);
            margin-top: 5px;
            text-align: right;
        }

        .error-message {
            color: var(--error);
            background: rgba(255, 74, 107, 0.1);
            border: 1px solid rgba(255, 74, 107, 0.3);
        }

        .success-message {
            color: var(--success);
            background: rgba(74, 255, 107, 0.1);
            border: 1px solid rgba(74, 255, 107, 0.3);
        }

        .info-message {
            color: var(--primary-light);
            background: rgba(74, 107, 255, 0.1);
            border: 1px solid rgba(74, 107, 255, 0.3);
        }

        .message-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            justify-content: flex-end;
        }

        .message-action {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-dim);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .message-action:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
        }

        .copy-success {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .copy-success.show {
            opacity: 1;
        }

        @media (max-width: 600px) {
            .chat-app {
                height: 100vh;
                max-height: none;
                border-radius: 0;
            }
            
            .message {
                max-width: 90%;
                font-size: 14px;
            }
            
            #user-input {
                padding: 12px 18px;
                padding-right: 45px;
            }
            
            #send-btn {
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <div class="chat-app">
        <div class="ai-header">
            <div class="ai-core">
                <div class="ai-core-inner">AI</div>
            </div>
            <div>
                <div class="ai-title">Pixcel.AI</div>
                <div class="ai-subtitle">Ask me anything - I can explain, analyze, and help with various topics</div>
            </div>
        </div>

        <div class="chat-container" id="chat-area">
            <div class="message ai-message">
                <div class="message-content">Hello! I'm your advanced AI assistant. I can help with a wide range of topics including:</div>
                <div style="margin-top: 10px;">
                    
                </div>
                <div class="message-timestamp">Just now</div>
            </div>
        </div>

        <div class="typing-indicator" id="typing-indicator">
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>

        <div class="input-area">
            <div class="input-wrapper">
                <input type="text" id="user-input" placeholder="Ask me anything..." autocomplete="off">
                <button class="mic-btn" id="mic-btn" title="Voice input">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2a3 3 0 0 1 3 3v6a3 3 0 0 1-6 0V5a3 3 0 0 1 3-3z"></path>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2h-2v2a9 9 0 0 0 8 8.94V22h-3v2h8v-2h-3v-1.06A9 9 0 0 0 21 12v-2h-2z"></path>
                    </svg>
                </button>
            </div>
            <button id="send-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
            </button>
        </div>

        <div class="copy-success" id="copy-success">Copied to clipboard!</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatArea = document.getElementById('chat-area');
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            const micBtn = document.getElementById('mic-btn');
            const typingIndicator = document.getElementById('typing-indicator');
            const commandSuggestions = document.querySelectorAll('.command-suggestion');
            const copySuccess = document.getElementById('copy-success');

            // Conversation history
            let conversationHistory = [
                { role: "system", content: "You are a helpful AI assistant called Pixcel.AI. You provide detailed, accurate, and helpful responses to user queries. You can explain complex concepts, write code, help with problem solving, and engage in general conversation. Format your responses with proper markdown when appropriate (for code, lists, tables, etc.)." }
            ];

            // Add click handlers for command suggestions
            commandSuggestions.forEach(suggestion => {
                suggestion.addEventListener('click', function() {
                    userInput.value = this.textContent;
                    userInput.focus();
                });
            });

            // Check if browser supports speech recognition
            const isSpeechRecognitionSupported = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;
            let recognition;
            
            if (isSpeechRecognitionSupported) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';

                recognition.onstart = function() {
                    micBtn.classList.add('listening');
                    userInput.placeholder = "Listening...";
                };

                recognition.onerror = function(event) {
                    console.error('Speech recognition error', event.error);
                    micBtn.classList.remove('listening');
                    userInput.placeholder = "Ask me anything...";
                    addMessage("Sorry, I couldn't hear you. Please try again.", false);
                };

                recognition.onend = function() {
                    micBtn.classList.remove('listening');
                    userInput.placeholder = "Ask me anything...";
                };

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    userInput.value = transcript;
                    sendMessage();
                };
            } else {
                micBtn.style.display = 'none';
            }

            // Format response with markdown
            function formatResponse(text) {
                // Simple markdown parsing for demo purposes
                // In a real app, you'd use a proper markdown library
                
                // Headers
                text = text.replace(/^# (.*$)/gm, '<h1>$1</h1>');
                text = text.replace(/^## (.*$)/gm, '<h2>$1</h2>');
                text = text.replace(/^### (.*$)/gm, '<h3>$1</h3>');
                
                // Bold and italic
                text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
                text = text.replace(/_([^_]+)_/g, '<em>$1</em>');
                
                // Code blocks
                text = text.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
                text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
                
                // Links
                text = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
                
                // Lists
                text = text.replace(/^\s*\*\s(.*$)/gm, '<li>$1</li>');
                text = text.replace(/^\s*-\s(.*$)/gm, '<li>$1</li>');
                text = text.replace(/^\s*\+\s(.*$)/gm, '<li>$1</li>');
                text = text.replace(/^\s*\d+\.\s(.*$)/gm, '<li>$1</li>');
                
                // Blockquotes
                text = text.replace(/^>\s(.*$)/gm, '<blockquote>$1</blockquote>');
                
                // Horizontal rule
                text = text.replace(/^---$/gm, '<hr>');
                
                // Paragraphs
                text = text.replace(/\n\n/g, '<br><br>');
                
                return text;
            }

            // Add message to chat
            function addMessage(text, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser ? 'user-message' : 'ai-message');
                
                const contentDiv = document.createElement('div');
                contentDiv.classList.add('message-content');
                contentDiv.innerHTML = isUser ? text : formatResponse(text);
                messageDiv.appendChild(contentDiv);
                
                // Add timestamp
                const timestampDiv = document.createElement('div');
                timestampDiv.classList.add('message-timestamp');
                const now = new Date();
                timestampDiv.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                messageDiv.appendChild(timestampDiv);
                
                // Add copy button for AI messages
                if (!isUser) {
                    const actionsDiv = document.createElement('div');
                    actionsDiv.classList.add('message-actions');
                    
                    const copyBtn = document.createElement('button');
                    copyBtn.classList.add('message-action');
                    copyBtn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy';
                    copyBtn.addEventListener('click', function() {
                        navigator.clipboard.writeText(text).then(() => {
                            copySuccess.classList.add('show');
                            setTimeout(() => {
                                copySuccess.classList.remove('show');
                            }, 2000);
                        });
                    });
                    
                    actionsDiv.appendChild(copyBtn);
                    messageDiv.appendChild(actionsDiv);
                }
                
                chatArea.appendChild(messageDiv);
                chatArea.scrollTop = chatArea.scrollHeight;
                
                // Add to conversation history
                conversationHistory.push({
                    role: isUser ? "user" : "assistant",
                    content: text
                });
            }

            // Add error message
            function addErrorMessage(text) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message', 'error-message');
                messageDiv.textContent = text;
                chatArea.appendChild(messageDiv);
                chatArea.scrollTop = chatArea.scrollHeight;
            }

            // Handle commands
            function handleCommand(command) {
                command = command.toLowerCase().trim();
                
                // Get current time and date
                const now = new Date();
                const timeString = now.toLocaleTimeString();
                const dateString = now.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                if (command.includes('hello') || command.includes('hi') || command.includes('hey')) {
                    return `Hello there! I'm Pixcel.AI, your advanced AI assistant. How can I help you today?`;
                } 
                else if (command.includes('time')) {
                    return `The current time is **${timeString}**`;
                }
                else if (command.includes('date') || command.includes('today')) {
                    return `Today is **${dateString}**`;
                }
                else if (command.includes('thank')) {
                    return `You're welcome! Is there anything else I can help you with?`;
                }
                else if (command.includes('who are you') || command.includes('what are you')) {
                    return `I'm Pixcel.AI, an artificial intelligence assistant designed to help with a wide range of tasks. I can explain concepts, solve problems, generate creative content, and much more!`;
                }
                else if (command.includes('help')) {
                    return `Here are some things I can help with:
- **General Knowledge**: Explain concepts, provide definitions, summarize topics
- **Math & Science**: Solve equations, explain theories, help with homework
- **Programming**: Write and explain code in various languages
- **Writing**: Help with essays, creative writing, editing
- **Productivity**: Time management tips, organization strategies
- **Current Information**: Time, date, basic facts

Try asking me anything specific!`;
                }
                else {
                    return null; // No specific command matched
                }
            }

            // Get AI response
            async function getAIResponse(userMessage) {
                // First check for commands
                const commandResponse = handleCommand(userMessage);
                if (commandResponse) {
                    return commandResponse;
                }
                
                // Show typing indicator
                typingIndicator.style.display = 'block';
                chatArea.scrollTop = chatArea.scrollHeight;
                
                try {
                    // Simulate API delay for non-command responses
                    await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 800));
                    
                    // In a real implementation, you would call an actual AI API here
                    // For this demo, we'll simulate different types of responses based on the query
                    
                    // Math problems
                    if (userMessage.match(/\d+[\+\-\*\/]\d+/)) {
                        try {
                            const result = eval(userMessage.replace(/[^0-9\+\-\*\/\(\)\.]/g, ''));
                            return `The result of \`${userMessage}\` is **${result}**`;
                        } catch {
                            // Fall through to general response
                        }
                    }
                    
                    // Programming questions
                    if (userMessage.toLowerCase().includes('code') || 
                        userMessage.toLowerCase().includes('function') || 
                        userMessage.toLowerCase().includes('program')) {
                        
                        const languages = ['Python', 'JavaScript', 'Java', 'C++', 'C#', 'PHP', 'Ruby', 'Go'];
                        const randomLang = languages[Math.floor(Math.random() * languages.length)];
                        
                        if (userMessage.toLowerCase().includes('python')) {
                            return `Here's a Python solution for your request:\n\n\`\`\`python\ndef solution():\n    # ${userMessage}\n    result = None  # Implement your solution here\n    return result\n\`\`\`\n\nWould you like me to explain any specific part of this?`;
                        }
                        
                        if (userMessage.toLowerCase().includes('javascript')) {
                            return `Here's a JavaScript solution:\n\n\`\`\`javascript\nfunction solution() {\n    // ${userMessage}\n    let result = null; // Implement your solution here\n    return result;\n}\n\`\`\`\n\nWould you like me to modify this in any way?`;
                        }
                        
                        return `For programming questions, I can provide code examples in various languages. Here's a template in ${randomLang}:\n\n\`\`\`${randomLang.toLowerCase()}\n// ${userMessage}\n// Implement your solution here\n\`\`\`\n\nWould you like me to provide a more specific solution?`;
                    }
                    
                    // Definition questions
                    if (userMessage.toLowerCase().startsWith('what is') || 
                        userMessage.toLowerCase().startsWith('define')) {
                        
                        const term = userMessage.replace(/what is|define/gi, '').trim();
                        return `**${term.charAt(0).toUpperCase() + term.slice(1)}** refers to ${getRandomDefinition()}. ${getRandomAdditionalInfo()}`;
                    }
                    
                    // General knowledge response
                    const responses = [
                        `Regarding "${userMessage}", here's what I can share:\n\n${getDetailedResponse()}`,
                        `Interesting question about ${userMessage.split(' ')[0]}. Based on my knowledge:\n\n${getDetailedResponse()}`,
                        `Let me explain ${userMessage}:\n\n${getDetailedResponse()}`,
                        `Here's a comprehensive answer to your question about ${userMessage}:\n\n${getDetailedResponse()}`,
                        `I've analyzed your query about ${userMessage}. Here's what I found:\n\n${getDetailedResponse()}`
                    ];
                    
                    return responses[Math.floor(Math.random() * responses.length)];
                } finally {
                    typingIndicator.style.display = 'none';
                }
            }

            // Helper functions for generating realistic responses
            function getRandomDefinition() {
                const definitions = [
                    "a complex concept with multiple interpretations depending on context",
                    "a term used across several disciplines with slightly different meanings in each",
                    "an important idea that has evolved over time",
                    "a fundamental principle in its field of study",
                    "a phenomenon that researchers continue to investigate"
                ];
                return definitions[Math.floor(Math.random() * definitions.length)];
            }

            function getRandomAdditionalInfo() {
                const additions = [
                    "Recent studies have shown new perspectives on this topic.",
                    "The understanding of this has changed significantly in the past decade.",
                    "There are several competing theories about this.",
                    "This is a foundational concept that leads to more advanced topics.",
                    "Many practical applications stem from this idea."
                ];
                return additions[Math.floor(Math.random() * additions.length)];
            }

            function getDetailedResponse() {
                const paragraphs = [
                    "The subject in question involves multiple factors that interact in complex ways. Research indicates that the primary components include structural elements, dynamic processes, and contextual influences. When examining this through different theoretical lenses, we can identify patterns that help explain observed phenomena.",
                    
                    "Historically, this concept emerged from early work in the field, with key contributions from several prominent researchers. The timeline of development shows how understanding has evolved from initial simple models to today's more nuanced frameworks that account for a wider range of variables.",
                    
                    "Practical applications are numerous, including uses in technology, medicine, and social systems. Implementation challenges often arise from the need to balance competing priorities while maintaining core functionality across diverse environments.",
                    
                    "Comparative analysis reveals interesting similarities and differences with related concepts. These relationships help clarify boundaries and highlight unique characteristics that define the subject's distinctive qualities.",
                    
                    "Future directions for research and application include exploring novel combinations with emerging technologies, addressing current limitations through innovative approaches, and expanding the scope of potential benefits to new domains."
                ];
                
                // Return 2-3 random paragraphs
                const count = 2 + Math.floor(Math.random() * 2);
                const selected = [];
                while (selected.length < count) {
                    const p = paragraphs[Math.floor(Math.random() * paragraphs.length)];
                    if (!selected.includes(p)) selected.push(p);
                }
                
                return selected.join("\n\n");
            }

            // Handle send message
            async function sendMessage() {
                const message = userInput.value.trim();
                if (message) {
                    // Add user message
                    addMessage(message, true);
                    userInput.value = '';
                    
                    try {
                        // Get AI response
                        const aiResponse = await getAIResponse(message);
                        addMessage(aiResponse, false);
                    } catch (error) {
                        console.error('Error getting AI response:', error);
                        addErrorMessage("Sorry, I encountered an error processing your request. Please try again.");
                    }
                }
            }

            // Event listeners
            sendBtn.addEventListener('click', sendMessage);
            
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            micBtn.addEventListener('click', function() {
                if (isSpeechRecognitionSupported) {
                    if (micBtn.classList.contains('listening')) {
                        recognition.stop();
                    } else {
                        recognition.start();
                    }
                } else {
                    addErrorMessage("Sorry, voice input is not supported in your browser.");
                }
            });

            // Focus input on load
            userInput.focus();
        });
    </script>
</body>
</html>